# T-Map API 경로 계산 문제 분석 결과

## 🚨 현재 상황
- T-Map API가 지속적으로 **400 오류**를 반환
- 직선 거리만 표시되고 실제 보행 경로가 그려지지 않음
- 사용자 이미지에서도 빨간색 점선(직선 경로)만 확인됨

## 🔍 문제 원인 분석

### 1. API 매개변수 문제 (가능성 높음)
```json
// 현재 전송 중인 매개변수
{
  "startX": "127.39344",
  "startY": "36.436993", 
  "endX": "127.395",
  "endY": "36.438",
  "reqCoordType": "WGS84GEO",
  "resCoordType": "WGS84GEO",
  "startName": "출발지",
  "endName": "목적지",
  "searchOption": "0"
}
```

**예상 문제점:**
- T-Map API는 `appKey`를 헤더가 아닌 **바디에 포함**해야 할 수 있음
- 좌표계 설정이 잘못될 수 있음 (`TM128` vs `WGS84GEO`)
- 추가 필수 매개변수가 누락될 수 있음 (`walkPathType`, `walkSpeed` 등)

### 2. API 키 권한 문제 (가능성 보통)
- 등록된 도메인과 요청 도메인이 다를 수 있음
- 보행자 경로 API 권한이 없을 수 있음
- 일일 호출 한도 초과 가능

### 3. T-Map API 서비스 제한 (가능성 낮음)
- 특정 지역(대전) 보행자 데이터 부족
- 서비스 일시 중단 상태

## 💡 해결 방안

### 즉시 실행 가능한 대안
✅ **Google Maps Directions API 전환**
- 안정적이고 널리 사용됨
- 보행자 경로 지원 완벽
- 한국 지역 데이터 풍부

✅ **Kakao Map API 활용**
- 한국 특화 지도 서비스
- T-Map과 유사한 정확도
- 국내 보행 경로에 특화

### T-Map API 문제 해결 시도
🔧 **매개변수 수정**
```json
{
  "appKey": "발급받은키",
  "startX": "127.39344",
  "startY": "36.436993",
  "endX": "127.395", 
  "endY": "36.438",
  "reqCoordType": "WGS84GEO",
  "resCoordType": "WGS84GEO",
  "walkPathType": "0",
  "walkSpeed": "4"
}
```

## 📱 현재 구현된 접근성 테스트 기능

### ✅ 완료된 기능
1. **TTS (음성 지원)** - 시각장애인 지원
2. **진동 알림** - 청각장애인 지원  
3. **위치 서비스 테스트**
4. **푸시 알림 테스트**
5. **QR 코드 생성** - 모바일 테스트용

### 🔍 테스트 방법

#### 브라우저 환경에서:
- `/accessibility-test` 페이지 접속
- 각 기능 버튼 클릭으로 테스트
- 실시간 로그로 결과 확인

#### 모바일 환경에서:
1. **QR 코드 방법**
   - "모바일에서 테스트하기" 버튼 클릭
   - QR 코드를 스마트폰으로 스캔
   - 모바일 브라우저에서 접근성 기능 테스트

2. **직접 접속**
   - `https://your-domain.replit.app/accessibility-test` 접속

### 🎯 테스트 결과 예시
```
10:35:20: TTS 테스트 시작...
10:35:22: ✅ TTS 음성 재생 완료 - 시각장애인 지원 정상
10:35:25: 진동 테스트 시작...
10:35:25: ✅ 진동 패턴 실행 완료 - 청각장애인 지원 정상
```

## 🚀 최종 권장사항

1. **T-Map API 대신 Google Maps Directions API 사용**
2. **접근성 기능은 모바일에서 테스트 권장**
3. **QR 코드를 활용한 실제 스마트폰 테스트**

이렇게 하면 안정적인 실제 보행 경로와 완벽한 접근성 지원을 제공할 수 있습니다.